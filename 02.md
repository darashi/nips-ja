NIP-02
======

連絡先リストと愛称
-------------------------

`final` `optional`

「連絡先リスト」を意味するkind `3`の特別なイベントは、フォローしている/既知のプロフィールごとの`p`タグのリストを持つものとして定義されます。

タグの個々の要素は、プロフィールの鍵・その鍵からのイベントを発見できるリレーのURL (必要なければ空文字列で設定可能です) ・そのプロフィールのローカル名 (あるいは「愛称」) (空文字列が設定されるか、提供されないようできます) を含むべきで、つまり`["p", <32-bytes hex key>, <main relay URL>, <petname>]`です。`content`は何でもかまいませんが、無視されるべきです。

例:

```json
{
  "kind": 3,
  "tags": [
    ["p", "91cf9..4e5ca", "wss://alicerelay.com/", "alice"],
    ["p", "14aeb..8dad4", "wss://bobrelay.com/nostr", "bob"],
    ["p", "612ae..e610f", "ws://carolrelay.com/ws", "carol"]
  ],
  "content": "",
  ...other fields
}
```

新しい子連絡先リストが公開されるたびに過去のものは上書きされるので、すべての要素を含むべきです。リレーとクライアントは新しいものを受け取ったら速やかに過去の連絡先リストを削除すべきです (SHOULD) 。

## 用途

### 連絡先リストのバックアップ

リレーがイベントを十分な期間保存すると信じているなら、このkind 3イベントを使ってフォローリストをバックアップし、別のデバイスで復元できます。

### プロフィールの発見とコンテキストの拡張

クライアントは、ブラウジングしているプロフィールがフォローしている人のリストを表示したり、フォローまたはブラウジングしている人の連絡先リストに基づいて誰をフォローするかの提案リストを作成したり、他のコンテキストでデータを表示したりするためにkind 3イベントを頼りにしてもかまいません。

### リレーの共有

クライアントは連絡先の完全なリストともにそれぞれの連絡先のために適したリレーを公開してもよく、これによりほかのクライアントは必要に応じてこれを内部のリレーリストの更新に使うことができ、検閲耐性が高まります。

### 愛称スキーム

連絡先リストからのデータは、クライアントによってほかの人々の連絡先リストから派生したローカルの["petname"](http://www.skyhunter.com/marcs/petnames/IntroPetNames.html)テーブルを構築するために用いることができます。これにより、グローバルな人間が読める名前の必要性が軽減されます。例えば:

ユーザーは次のような内部の連絡先リストを持っています。

```json
[
  ["p", "21df6d143fb96c2ec9d63726bf9edc71", "", "erin"]
]
```

そして、次のように2つの連絡先リストを受け取り、1つは`21df6d143fb96c2ec9d63726bf9edc71`からです。

```json
[
  ["p", "a8bb3d884d5d90b413d9891fe4c4e46d", "", "david"]
]
```

もう1つは`a8bb3d884d5d90b413d9891fe4c4e46d`からです。

```json
[
  ["p", "f57f54057d2a7af0efecc8b0b66f5708", "", "frank"]
]
```

ユーザーが`21df6d143fb96c2ec9d63726bf9edc71`を見るとき、クライアントは代わりに _erin_ を表示できます。
ユーザーが`a8bb3d884d5d90b413d9891fe4c4e46d`を見るとき、クライアントは代わりに _david.erin_ を表示できます。
ユーザーが`f57f54057d2a7af0efecc8b0b66f5708`を見るとき、クライアントは代わりに _frank.david.erin_ を表示できます。
